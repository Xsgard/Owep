<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>学生管理</title>
</head>
<link rel="shortcut icon" href="../../static/favicon.ico"
      th:href="@{/static/favicon.ico}">
<link href="../../static/css/bootstrap.min.css?v=3.3.6" rel="stylesheet"
      th:href="@{/static/css/bootstrap.min.css(v=3.3.6) }">
<link href="../../static/css/font-awesome.css?v=4.4.0" rel="stylesheet"
      th:href="@{/static/css/font-awesome.css(v=4.4.0) }">
<link href="../../static/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet"
      th:href="@{/static/css/plugins/bootstrap-table/bootstrap-table.min.css }">
<link href="../../static/css/animate.css" rel="stylesheet"
      th:href="@{/static/css/animate.css }">
<link href="../../static/css/style.css?v=4.1.0" rel="stylesheet"
      th:href="@{/static/css/style.css(v=4.1.0) }">
<!--上传控件-->
<link href="../../static/public/user/bootstrap-fileinput/css/fileinput.min.css" media="all" rel="stylesheet"
      type="text/css"
      th:href="@{/static/public/user/bootstrap-fileinput/css/fileinput.min.css}"/>
<link href="../../static/public/user/bootstrap-fileinput/themes/explorer/theme.css" media="all" rel="stylesheet"
      type="text/css"
      th:href="@{/static/public/user/bootstrap-fileinput/themes/explorer/theme.css}"/>
<!--树形控件-->
<link href="../../static/css/plugins/treeview/bootstrap-treeview.css" rel="stylesheet"
      th:href="@{/static/css/plugins/treeview/bootstrap-treeview.css }">
<!-- 弹出框插件 -->
<link href="../../static/css/plugins/sweetalert/sweetalert.css" rel="stylesheet"
      th:href="@{/static/css/plugins/sweetalert/sweetalert.css }">
<!--时间控件-->
<link href="../../static/public/user/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css"
      th:href="@{/static/public/user/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css}"
      rel="stylesheet">
<!--滑动按钮-->
<link href="../../static/css/plugins/switchery/switchery.css"
      th:href="@{/static/css/plugins/switchery/switchery.css}" rel="stylesheet">
<style type="text/css">
    .table > thead > tr > th {
        color: #2a62bc;
    }

    #stu_query .col-md-2, .col-md-4, .col-md-1 {
        padding-left: 0px;
        padding-right: 8px;
    }
</style>
<body class="gray-bg">
<!--表单-->
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="ibox-title">
        <div class="row row-lg">
            <div class="col-sm-12">
                <div class="tabs-container">
                    <ul class="nav nav-tabs">
                        <li class="active" id="allStu"><a data-toggle="tab" href="#tab-1"
                                                          aria-expanded="true">全部学生信息</a>
                        </li>
                        <li class="" id="notAllStu"><a data-toggle="tab" href="#tab-2"
                                                       aria-expanded="false">签约未分班学生信息</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="tab-1" class="tab-pane active">
                            <div class="panel-body">
                                <div id="toolbar_1">
                                    <form class="form-inline" id="stu_query">
                                        <div class="col-md-7" style="padding: 0">
                                            <div class="col-md-2">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <input type="text" name="class" class="form-control"
                                                               id="testNoBtn"
                                                               placeholder=" 班级">
                                                        <div class="input-group-btn">
                                                            <button type="button" class="btn btn-white dropdown-toggle"
                                                                    data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                            </ul>
                                                        </div>
                                                        <!-- /btn-group -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" id="testNoBtn2"
                                                               name="name"
                                                               placeholder="姓名">
                                                        <div class="input-group-btn">
                                                            <button type="button" class="btn btn-white dropdown-toggle"
                                                                    data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                            </ul>
                                                        </div>
                                                        <!-- /btn-group -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" id="testNoBtn3"
                                                               name="school"
                                                               placeholder="学校">
                                                        <div class="input-group-btn">
                                                            <button type="button" class="btn btn-white dropdown-toggle"
                                                                    data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                            </ul>
                                                        </div>
                                                        <!-- /btn-group -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" id="testNoBtn4"
                                                               name="college"
                                                               placeholder="学院">
                                                        <div class="input-group-btn">
                                                            <button type="button" class="btn btn-white dropdown-toggle"
                                                                    data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                            </ul>
                                                        </div>
                                                        <!-- /btn-group -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control datepicker" name="start"
                                                               placeholder="起始时间"/>
                                                        <span class="input-group-addon">到</span>
                                                        <input type="text" class="form-control datepicker" name="end"
                                                               placeholder="结束时间"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <button class="btn btn-success query" type="button" id="queryBtn">查询</button>
                                        </div>
                                        <div class="col-md-4" style="padding: 0">
                                            <div style="float: right">
                                                <button class="btn btn-danger deleteAll" type="button">删除</button>
                                                <button class="btn btn-info" type="button" data-toggle="modal"
                                                        data-target="#modal_add">添加
                                                </button>
                                                <button class="btn btn-primary export" type="button">导出</button>
                                                <button class="btn btn-warning to_lead" type="button"
                                                        data-toggle="modal"
                                                        data-target="#modal_to_channel">导入
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!--   第一个页面，也就是主页面  -->
                                <table id="tb_departments_1"></table>
                            </div>
                        </div>
                        <div id="tab-2" class="tab-pane">
                            <div class="panel-body">
                                <div id="toolbar">
                                    <button type="button" class="btn btn-success" data-toggle="modal"
                                            data-target="#modal_allocation_2">批量班级分配
                                    </button>
                                </div>
                                <!--   没有分班级的页面   -->
                                <table id="tb_departments_2"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--添加-->
<div class="modal  fade" id="modal_add" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">添加学生</h4>
            </div>
            <div class="modal-body">
                <form method="get" class="form-horizontal" id="form_add">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            学号</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuNumber" class="form-control" placeholder="请输入学号"
                                   id="add_stuNumber">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            姓名</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuName" class="form-control" placeholder="请输入姓名" id="add_stuName">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            手机</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuPhone" class="form-control" placeholder="请输入手机号"
                                   id="add_stuPhone">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            邮箱</label>
                        <div class="col-sm-8">
                            <input type="email" name="stuEmail" class="form-control" placeholder="请输入邮箱"
                                   id="add_stuEmail">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            密码</label>
                        <div class="col-sm-8">
                            <input type="password" name="stuPassword" class="form-control" placeholder="请输入密码"
                                   id="add_stuPassword">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            有效期</label>
                        <div class="col-sm-8">
                            <input type="text" name="effectiveDate" class="form-control myData_add"
                                   id="add_effectiveDate"
                                   placeholder="请输入截至日期">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否启用</label>
                        <div class="col-sm-6">
                            <input type="checkbox" name="status" class="js-switch form-control" id="add_status"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            性别</label>
                        <div class="col-sm-8">
                            <label class="control-label">
                                <input type="radio" checked="checked" value="1" name="gender">
                                <span>男</span>
                            </label>&nbsp;&nbsp;

                            <label class="control-label">
                                <input type="radio" value="0" name="gender">
                                <span>女</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            毕业院校</label>
                        <div class="col-sm-8">
                            <input type="text" name="school" disabled="" class="form-control " placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            省市区</label>
                        <div class="col-sm-8">
                            <input type="text" name="region" disabled="" class="form-control " placeholder="">
                        </div>
                    </div>

                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary add" id="model_add_submit_btn">保存</button>
            </div>
        </div>
    </div>
</div>
<!--编辑-->
<div class="modal  fade" id="modal_modification" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">修改</h4>
            </div>
            <div class="modal-body">
                <form method="post" th:action="@{/user/stuList/edit}" class="form-horizontal" id="form_modification_1">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            <input type="text" id="edit_id" name="id" hidden>
                            学号</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuNumber" disabled="" class="form-control" placeholder=""
                                   id="edit_stuNumber">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            姓名</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuName" class="form-control" placeholder="请输入姓名"
                                   id="edit_stuName">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            手机</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuPhone" class="form-control" placeholder="请输入手机号"
                                   id="edit_stuPhone">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            邮箱</label>
                        <div class="col-sm-8">
                            <input type="email" name="stuEmail" class="form-control" placeholder="请输入邮箱"
                                   id="edit_stuEmail">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            密码</label>
                        <div class="col-sm-8">
                            <input type="password" name="stuPassword" class="form-control" placeholder="请输入密码"
                                   id="edit_stuPwd">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            有效期</label>
                        <div class="col-sm-8">
                            <input type="text" name="effectiveDate" class="form-control myData_add"
                                   id="edit_effectiveDate"
                                   placeholder="请输入截至日期">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否启用</label>
                        <div class="col-sm-6">
                            <input type="checkbox" name="status" class="js-switch form-control" id="edit_status"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            性别</label>
                        <div class="col-sm-8">
                            <label class="control-label">
                                <input type="radio" checked="checked" value="1" name="edit_gender">
                                <span>男</span>
                            </label>&nbsp;&nbsp;

                            <label class="control-label">
                                <input type="radio" value="0" name="edit_gender">
                                <span>女</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            毕业院校</label>
                        <div class="col-sm-8">
                            <input type="text" name="school" disabled="" class="form-control myData_add" placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            省市区</label>
                        <div class="col-sm-8">
                            <input type="text" name="region" disabled="" class="form-control myData_add" placeholder="">
                        </div>
                    </div>

                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary modification_1">保存</button>
            </div>
        </div>
    </div>
</div>
<!--编辑-模块二-->
<div class="modal  fade" id="modal_modification_1" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">修改</h4>
            </div>
            <div class="modal-body">
                <form method="get" class="form-horizontal" id="form_modification_2">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            序号</label>
                        <div class="col-sm-8">
                            <input type="text" name="id" disabled="" class="form-control" placeholder=""
                                   id="id">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            学号</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuNumber" id="stuNumber" disabled="" class="form-control"
                                   placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            姓名</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuName" id="stuName" class="form-control" placeholder="请输入姓名">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            性别</label>
                        <div class="col-sm-8">
                            <label class="control-label">
                                <input type="radio" checked="checked" value="男" name="gender">
                                <span>男</span>
                            </label>&nbsp;&nbsp;

                            <label class="control-label">
                                <input type="radio" value="女" name="gender">
                                <span>女</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            手机</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuPhone" id="stuPhone" class="form-control" placeholder="请输入手机号">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            客户归属</label>
                        <div class="col-sm-8">
                            <input type="text" name="customerBelongs" class="form-control" placeholder="请输入客户归属">
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary modification_2">保存</button>
            </div>
        </div>
    </div>
</div>
<!--分配班级-->
<div class="modal  fade" id="modal_allocation" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">分配班级</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="form_allocation_1">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            学生编号</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuId" disabled="" class="form-control" id="classChooseStuId"
                                   placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            学生姓名</label>
                        <div class="col-sm-8">
                            <input type="text" name="stuName" disabled="" class="form-control" id="classChooseStuName"
                                   placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label"></label>
                        <div class="col-sm-8">
                            <button type="button" class="btn btn-primary allocation">分配班级</button>
                            <button type="button" class="btn btn-default class_transfer">学生转班</button>
                        </div>
                    </div>
                    <div id="allocation">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">
                                分配班级</label>
                            <div class="col-sm-8">
                                <div class="ibox-content">
                                    <div id="treeview_allocation"></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary allocation_1">保存</button>
                        </div>
                    </div>
                    <!---------------------------------------------------------------------------------------------->
                    <div id="class_transfer" style="display:none;">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">
                                所在班级</label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" name="class_start" class="form-control" id="class_start"
                                        disabled="">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-white dropdown-toggle"
                                                data-toggle="dropdown">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                        </ul>
                                    </div>
                                    <!-- /btn-group -->
                                </div>
                            </div>
                        </div>
                        <div class="form-group ">
                            <input type="hidden"    name="classId" id="class_end_id">
                            <label class="col-sm-2 control-label">
                                转到班级</label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" name="class_end" class="form-control" id="class_end">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-white dropdown-toggle"
                                                data-toggle="dropdown">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                        </ul>
                                    </div>
                                    <!-- /btn-group -->
                                </div>
                            </div>
                        </div>
                        <div class="form-group ">
                            <label class="col-sm-2 control-label">
                                相关描述</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" name="describe" rows="4"></textarea>
                                <!-- /btn-group -->
                            </div>
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary class_transfer_button_1"  >保存</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!--分配班级-模块二-->
<div class="modal  fade" id="modal_allocation_1" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">分配班级</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="form_allocation_2">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            学生姓名</label>
                        <div class="col-sm-8">
                            <input type="text" name="name" disabled="" class="form-control" placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            分配班级</label>
                        <div class="col-sm-8">
                            <div class="ibox-content">
                                <div class="treeview_allocation"></div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary allocation_2">保存</button>
            </div>
        </div>
    </div>
</div>
<!--批量分配班级-模块二-->
<div class="modal  fade" id="modal_allocation_2" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">分配班级</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="form_allocation_3">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            分配班级</label>
                        <div class="col-sm-8">
                            <div class="ibox-content">
                                <div class="treeview_allocation"></div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary allocation_3">保存</button>
            </div>
        </div>
    </div>
</div>
<!--导入-->
<div class="modal  fade" id="modal_to_channel" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">批量导入</h4>
            </div>
            <div class="modal-body">
                <form method="get" class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            选择文件</label>
                        <div class="col-sm-8">
                            <input type="file" id="file" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">
                            模板下载</label>
                        <div class="col-sm-8">
                            <button type="button" class="btn btn-white" title="点我下载xls模板" download="1.txt">下载模板</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>
</div>

</body>
<!-- 全局js -->
<script src="../../static/js/jquery.min.js?v=2.1.4"
        th:src="@{/static/js/jquery.min.js(v=2.1.4) }"></script>
<script src="../../static/js/bootstrap.min.js?v=3.3.6"
        th:src="@{/static/js/bootstrap.min.js(v=3.3.6) }"></script>
<!-- 自定义js -->
<script src="../../static/js/content.js?v=1.0.0"
        th:src="@{/static/js/content.js(v=1.0.0) }"></script>
<!-- Bootstrap table -->
<script src="../../static/js/plugins/bootstrap-table/bootstrap-table.min.js"
        th:src="@{/static/js/plugins/bootstrap-table/bootstrap-table.min.js }"></script>
<script src="../../static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"
        th:src="@{/static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js }"></script>
<script src="../../static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"
        th:src="@{/static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js }"></script>
<!-- 树形控件 -->
<script src="../../static/js/plugins/treeview/bootstrap-treeview.min.js"
        th:src="@{/static/js/plugins/treeview/bootstrap-treeview.min.js}"></script>
<script src="../../static/public/user/treeCheckBox.js"
        th:src="@{/static/public/user/treeCheckBox.js }"></script>
<!--动态搜索-->
<script src="../../static/js/plugins/suggest/bootstrap-suggest.min.js"
        th:src="@{/static/js/plugins/suggest/bootstrap-suggest.min.js}"></script>
<script src="../../static/public/user/bsSuggest.js"
        th:src="@{/static/public/user/bsSuggest.js }"></script>
<!-- 弹出框插件 -->
<script src="../../static/js/plugins/sweetalert/sweetalert.min.js"
        th:src="@{/static/js/plugins/sweetalert/sweetalert.min.js }"></script>
<!-- 时间控件 -->
<script src="../../static/public/user/bootstrap-datetimepicker/bootstrap-datetimepicker.js"
        th:src="@{/static/public/user/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js}"></script>
<script src="../../static/public/user/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"
        th:src="@{/static/public/user/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js}"></script>
<script src="../../static/public/user/timeAllocation.js"
        th:src="@{/static/public/user/timeAllocation.js }"></script>
<!--滑动按钮-->
<script src="../../static/js/plugins/switchery/switchery.js"
        th:src="@{/static/js/plugins/switchery/switchery.js}"></script>
<!-- 文件上传 -->
<script src="../../static/public/user/bootstrap-fileinput/js/fileinput.js" type="text/javascript"
        th:src="@{/static/public/user/bootstrap-fileinput/js/fileinput.js}"></script>
<script src="../../static/public/user/bootstrap-fileinput/js/plugins/sortable.js" type="text/javascript"
        th:src="@{/static/public/user/bootstrap-fileinput/js/plugins/sortable.js}"></script>
<script src="../../static/public/user/bootstrap-fileinput/themes/explorer/theme.js" type="text/javascript"
        th:src="@{/static/public/user/bootstrap-fileinput/themes/explorer/theme.js}"></script>
<script src="../../static/public/user/bootstrap-fileinput/js/locales/zh.js" type="text/javascript"
        th:src="@{/static/public/user/bootstrap-fileinput/js/locales/zh.js}"></script>
<!--自定义js---表格操作-->
<script src="../../static/public/exam/tableOperation.js"
        th:src="@{/static/public/exam/tableOperation.js}"></script>
<!--时间控制-->
<script>
    $(function () {
        /*时间控件配置*/
        let object = '.datepicker';
        let object1 = '.myData_add';
        timeAllocationForTime(object);
        timeAllocationForTime(object1);
    });
</script>
<!--滑动按钮大小控制-->
<script>
    //页面如何有多个互动按钮必须需要这些js代码
    var switchery;
    let elems = Array.prototype.slice.call($('.js-switch'));
    elems.forEach(function (html) {
        /* size: 'normal' 控制大小*/
        switchery = new Switchery(html);
        html.onchange = function () {
            alert(html.checked);
        }
    });
</script>
<!--树形控制-->
<script>
    $(function () {
        let $treevie = $('#treeview_allocation');
        let url = "/owep/user/stuList/classTreeCheck";
        let id = $("#classChooseStuId").val();
        initCheckTree($treevie, url, id);
    });

</script>
<!--上传文件控制-->
<script>
    //初始化fileinput控件（第一次初始化）
    function initFileInput(ctrlName, uploadUrl) {
        var control = $('#' + ctrlName);
        control.fileinput({
            language: 'zh', //设置语言
            uploadUrl: uploadUrl, //上传的地址
            allowedFileExtensions: ['xls', 'xlsx'],//接收的文件后缀
            showUpload: true, //是否显示上传按钮
            showCaption: false,//是否显示标题
            browseClass: "btn btn-primary", //按钮样式
            textEncoding: 'UTF-8',//编码格式
            uploadAsync: false, //默认异步上传
            showPreview: false, //是否显示预览
            maxFileCount: 1, //表示允许同时上传的最大文件个数
            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
        });
    }

    //初始化fileinput控件（第一次初始化）
    initFileInput("file", "../../static/js/demo/user/excel");
</script>
<!--表单数据-->
<script>
    $(function () {
        TableInit().Init();
        //1.初始化Table
        BsSuggest;
        /*添加提交表单*/
        let $add_submit_btn = $('#model_add_submit_btn');
        $add_submit_btn.click(function () {
            let stuNumber = $('#add_stuNumber').val();
            let stuName = $('#add_stuName').val();
            let stuPhone = $('#add_stuPhone').val();
            let stuEmail = $('#add_stuEmail').val();
            let stuPwd = $('#add_stuPassword').val();
            let effectiveDate = $('#add_effectiveDate').val();
            let status = $('#add_status').val();
            let gender = $("input[name='gender']:checked").val();

            console.log('status:' + status);
            if (status === "on") {
                status = 1;
            } else {
                status = 0;
            }
            let stuData = {
                stuNumber: stuNumber,
                stuName: stuName,
                stuPhone: stuPhone,
                stuEmail: stuEmail,
                stuPwd: stuPwd,
                effectiveDate: effectiveDate,
                status: status,
                gender: gender
            };
            console.log(stuData);
            let stuJson = JSON.stringify(stuData);

            $.ajax({
                method: "post",
                url: "/owep/user/stuList/addStudent",
                async: "true",
                data: stuJson,
                dataType: "text",
                contentType: "application/json",
                success: function (feedback) {
                    alert(feedback);
                    window.location.reload();
                },
                error: function (jqXRH) {
                    console.log(jqXRH);
                    alert("添加未成功")
                }
            })
        })

        $('.deleteAll').click(function () {
            deleteAllRecords("/owep/user/stuList/deleteByGroup", '#tb_departments_1');
        });


        /*修改提交表单*/
        $('.modification_1').click(function () {
            console.log("修改，提交。");
            let id = $('#edit_id').val();
            let stuName = $('#edit_stuName').val();
            let stuNumber = $('#edit_stuNumber').val();
            let stuPhone = $('#edit_stuPhone').val();
            let stuEmail = $('#edit_stuEmail').val();
            let stuPwd = $('#edit_stuPwd').val();
            let effectiveDate = $('#edit_effectiveDate').val();
            let status = $('#edit_status').val();
            let gender = $("input[name='edit_gender']:checked").val();

            console.log("status:" + status);
            if (status === "on") {
                status = 1;
            } else {
                status = 0;
            }

            let stuData = {
                id: id,
                stuName: stuName,
                stuNumber: stuNumber,
                stuPhone: stuPhone,
                stuEmail: stuEmail,
                stuPwd: stuPwd,
                effectiveDate: effectiveDate,
                status: status,
                gender: gender
            };
            console.log(stuData);
            let stuJson = JSON.stringify(stuData);
            console.log(stuJson);
            $.ajax({
                method: "post",
                url: "/owep/user/stuList/edit",
                async: "true",
                data: stuJson,
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (feedback) {
                    alert(feedback);
                    window.location.reload();
                },
                error: function (jqXRH) {
                    console.log(jqXRH);
                    alert("修改未成功")
                }
            });
            //$('#form_modification_1').submit();
        });

        /*没有分班的修改哦*/
        $('.modification_2').click(function () {
            console.log("修改，提交。");
            let id = $('#id').val();
            let stuName = $('#stuName').val();
            let stuNumber = $('#stuNumber').val();
            let stuPhone = $('#stuPhone').val();
            let gender = $("input[name='gender']:checked").val();
            alert(id);
            let stuData = {
                id: id,
                stuName: stuName,
                stuNumber: stuNumber,
                stuPhone: stuPhone,
                gender: gender
            };
            console.log(stuData);
            let stuJson = JSON.stringify(stuData);
            console.log(stuJson);
            $.ajax({
                method: "post",
                url: "/owep/user/stuList/edit",
                async: "true",
                data: stuJson,
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (feedback) {
                    alert(feedback);
                    window.location.reload();
                },
                error: function (jqXRH) {
                    console.log(jqXRH);
                    alert("修改未成功")
                }
            });
        });

        /*分配角色*/
        $('.allocation_2').click(function () {
            $('#form_allocation_2').submit();
        });
        $('.allocation_3').click(function () {
            $('#form_allocation_3').submit();
        });

        $('.deleteAll').click(function () {
            deleteAllRecords("", '#tb_departments_1')
        });


        $('.query').click(function () {
            let dataList = new Array('class', 'name', 'school', 'college', 'start', 'end');
            queryRecords('form[id="stu_query"]', dataList);
        });

        /*导出按钮操作*/
        $('.export').click(function () {
            location="/owep/user/export";
        });
    });
    /**
     * 显示下拉按钮
     */
    let url = '../../static/js/demo/user/stuListTest.json';
    /*班级*/
    bsSuggest("#testNoBtn", "/owep/user/stuList/findAllClass", "className");
    /*姓名*/
    bsSuggest("#testNoBtn2", "/owep/user/stuList/findAllStudent", "stuName");
    /*学校*/
    bsSuggest("#testNoBtn3", "/owep/user/stuList/findAllSchool", "stuSchool");
    /*学院*/
    bsSuggest("#testNoBtn4", "/owep/user/stuList/findAllCollege", "stuCollege");
    /*客服归属*/
    bsSuggest("#testNoBtn5", url, "customerBelongs");
    /*所在班级*/
    bsSuggest("#testNoBtn6", url, "class");
    /*转到班级*/
    //bsSuggest("#class_end", "/owep/user/stuList/findAllClass", "className");

    let BsSuggest=$("#class_end").bsSuggest( {
        // $(object).bsSuggest({
        url: "/owep/user/stuList/findAllClass",
        showBtn: true,
        getDataMethod: "url",
        idField: "id",
        keyField: "className",
        effectiveFields: ["className"],
        //searchFields:"[className]",
    }).on('onSetSelectValue', function (e, keyword) {
        $("#class_end_id").val(keyword.id);

    })
    // function bsSuggest(object,url,fieldName)

    // }

    var TableInit = function () {
        var oTableInit = new Object();
        //初始化Table
        oTableInit.Init = function () {
            $('#tb_departments_1').bootstrapTable({
                url: '/owep/user/stuList/getTable',       //请求后台的URL（*）
                // method: 'get',                      //请求方式（*）
                toolbar: '#toolbar_1',                //工具按钮用哪个容器
                toolbarAlign: "right",
                striped: true,                      //是否显示行间隔色
                cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                pagination: true,                   //是否显示分页（*）
                sidePagination: "client",           //分页方式：client客户端分页，server服务端分页（*）
                pageNumber: 1,                       //初始化加载第一页，默认第一页
                pageSize: 10,                       //每页的记录行数（*）
                pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
                minimumCountColumns: 2,             //最少允许的列数
                clickToSelect: true,                //是否启用点击选中行
                height: 500,                        //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
                uniqueId: "id",                     //每一行的唯一标识，一般为主键列
                onPostBody: switchInit,
                columns: [{
                    checkbox: true
                }, {
                    field: 'id',
                    title: '编号',
                },
                    {
                        field: 'stuNumber',
                        title: '学号',
                        color: "red"
                    }, {
                        field: 'stuName',
                        title: '姓名'
                    }, {
                        field: 'gender',
                        title: '性别',
                        formatter: changeType,
                    }, {
                        field: 'stuPhone',
                        title: '手机'
                    }, {
                        field: 'stuEmail',
                        title: '邮箱'
                    }, {
                        field: 'status',
                        title: '有效状态',
                        formatter: addSlideChoiceBox,
                    }, {
                        field: 'lastAccessTime',
                        title: '最后登陆时间'
                    },
                    {
                        field: 'operate',
                        title: '操作',
                        width: 150,
                        formatter: addFunctionAlty,//表格中增加按钮  
                        events: {
                            'click button[title=删除]': function (e, value, row, index) {
                                deleteRecord(e, value, row, index, "/owep/user/stuList/delete", '#tb_departments_1')
                            },
                            'click button[title=修改]': function (e, value, row, index) {
                                //回显数据
                                echoDataForm('form[id="form_modification_1"]', new Array('id', 'stuNumber',
                                    'stuName', 'stuPhone', 'stuEmail', 'effectiveDate', "gender", "status"
                                ), row);
                                $('#modal_modification').modal();
                            },
                            'click button[title=分配班级]': function (e, value, row, index) {
                                //回显数据
                                $("#classChooseStuId").val(row.id);
                                $('#classChooseStuName').val(row.stuName);
                                $.ajax({
                                    url:"/owep/user/stuList/findClassName?id="+row.id,
                                    method:"get",
                                    dataType:"text",
                                    success:function (data) {
                                        $('#class_start').val(data);
                                    }
                                })
                                $('#modal_allocation').modal();
                            },
                        }
                    }]
            });
            /*这个是没有分配班级的页面*/
            $('#tb_departments_2').bootstrapTable({
                url: '/owep/user/stuList/getTableNoClass',       //请求后台的URL（*）
                // method: 'get',                      //请求方式（*）
                toolbar: '#toolbar',                //工具按钮用哪个容器
                striped: true,                      //是否显示行间隔色
                cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                pagination: true,                   //是否显示分页（*）
                queryParams: oTableInit.queryParams,//传递参数（*）
                sidePagination: "client",           //分页方式：client客户端分页，server服务端分页（*）
                pageNumber: 1,                       //初始化加载第一页，默认第一页
                pageSize: 10,                       //每页的记录行数（*）
                pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
                search: true,                       //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
                showSearchButton: true,
                searchAlign: "left",
                toolbarAlign: "right",
                searchFields: "customerBelongs",
                minimumCountColumns: 2,             //最少允许的列数
                clickToSelect: true,                //是否启用点击选中行
                height: 500,                        //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
                uniqueId: "id",                     //每一行的唯一标识，一般为主键列
                columns: [{
                    checkbox: true
                }, {
                    field: 'stuNumber',
                    title: '学号',
                }, {
                    field: 'stuName',
                    title: '姓名'
                }, {
                    field: 'gender',
                    title: '性别',
                    formatter: changeType
                }, {
                    field: 'stuPhone',
                    title: '手机'
                }, {
                    field: 'customerBelongs',
                    title: '客户归属'
                }, {
                    field: 'operate',
                    title: '操作',
                    width: 150,
                    formatter: addFunctionAlty_1,//表格中增加按钮  
                    events: {
                        'click button[title=删除]': function (e, value, row, index) {
                            deleteRecord(e, value, row, index, "/owep/user/stuList/delete", '#tb_departments_2')
                        },
                        'click button[title=修改]': function (e, value, row, index) {
                            echoDataForm('form[id="form_modification_2"]', new Array('id', 'stuNumber',
                                'stuName', 'stuPhone', 'gender', 'customerBelongs',
                            ), row);
                            $('#modal_modification_1').modal();
                        },
                        'click button[title=分配班级]': function (e, value, row, index) {
                            //回显数据
                            $('form[id="form_allocation_2"] input[name="name"]').val(row.name);
                            $('#modal_allocation_1').modal();
                        },
                    }
                }]
            });
        };
        /*滑动按钮初始化*/
        let switchInit = function () {
            //页面如何有多个互动按钮必须需要这些js代码
            let elems = Array.prototype.slice.call($('.js-switch-1'));
            elems.forEach(function (html) {
                /* size: 'normal' 控制大小*/
                let switchery = new Switchery(html);
                html.onchange = function () {
                    console.log("student status:" + html.checked);
                    let userId = $(this).attr("userId");
                    let status;
                    if (html.checked == true) {
                        alert("用户启用" + userId);
                        status = 1;
                    } else {
                        alert("禁用用户" + userId);
                        status = 0;
                    }
                    let switch_data = {
                        userId: userId,
                        status: status
                    };

                    //Todo Ajax
                    $.ajax({
                        url: "/owep/user/stuList/switch",
                        method: "get",
                        async: true,
                        data: switch_data,
                        dataType: "text",   //期望服务端返回的数据类型
                        contentType: "application/json",
                        error: function (jqXHR) {
                            swal("同步失败！", "请稍后重试", "error");
                        }
                    });
                }
            });
        }

        function addSlideChoiceBox(value, row, index) {
            if (value == '1') {
                return ' <input type="checkbox" class="js-switch-1 form-control"  userId="' + row.id + '"checked/>'
            }
            if (value == '0') {
                return ' <input type="checkbox" class="js-switch-1 form-control"  userId="' + row.id + '"/>'
            }
        }

        function addFunctionAlty(value, row, index) {
            return '<button id = "+id+" type = "button" class = "btn btn-white" title="修改" ' +
                '> <i class="glyphicon glyphicon-edit"/> </button>' +
                '<button id = "+id+" type = "button" class = "btn btn-white" title="删除"> <i class="glyphicon glyphicon-trash text-danger"/> </button>' +
                '<button id = "+id+" type = "button" class = "btn btn-white" title="分配班级"' +
                ' > <i class="glyphicon glyphicon-share text-success"/> </button>'
                ;
        }

        function addFunctionAlty_1(value, row, index) {
            return '<button id = "+id+" type = "button" class = "btn btn-white" title="修改" ' +
                '> <i class="glyphicon glyphicon-edit"/> </button>' +
                '<button id = "+id+" type = "button" class = "btn btn-white" title="删除"> <i class="glyphicon glyphicon-trash text-danger"/> </button>' +
                '<button id = "+id+" type = "button" class = "btn btn-white" title="分配班级"' +
                '> <i class="glyphicon glyphicon-share text-success"/> </button>'
                ;
        }

        function changeType(value) {
            if (value == '1') {
                return '男'
            }
            if (value == '0') {
                return '女'
            }
        }

        //得到查询的参数
        oTableInit.queryParams = function (params) {
            var temp = {   //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
                limit: params.limit,   //页面大小
                offset: params.offset,  //页码
                departmentname: $("#txt_search_departmentname").val(),
                statu: $("#txt_search_statu").val()
            };
            return temp;
        };

        return oTableInit;
    };

    $("#queryBtn").click(function () {
        let className = $("#testNoBtn").val();
        let stuName = $("#testNoBtn2").val();
        let
        let keyword = {
            "className": className,
            "stuName": stuName

        }
        //执行查询
        $.ajax({
            url: "/owep/user/advisorList/search",
            data: keyword,
            dataType: "json",
            success: function (data) {
                console.log(data);
                $("#tb_departments").bootstrapTable("load", data);
            },
            error: function (jqXHR) {
                alert("查询失败");
            }
        })
    });



    //--------------------------分配班级的按钮------------------------------------------------------
    let $treeview = $('#treeview_allocation');
    $('.allocation_1').click(function () {
        let stuId = $('#classChooseStuId').val();
        let classIds = [];
        let checks = $treeview.treeview('getChecked');
        console.log(checks);
        $.each(checks, function (index, item) {
            if (item.parentId !== undefined) {
                console.log(item.tags);
                classIds.push(item.tags);
            }
        });
        if (classIds.length < 1) {
            alert("请选择一个");
        }
        if (classIds.length > 1) {
            alert("只能选择一个");
        } else {
            let result = {stuId: stuId, classIds: classIds};
            console.log(result);
            if (confirm("确定添加这些数据么")) {
                alert("添加数据:" + result);
                $.ajax({
                    url: "/owep/user/stuList/treeCheck_edit",
                    method: "post",
                    data: JSON.stringify(result),
                    dataType: "text",
                    async: false,
                    contentType: "application/json",
                    success: function (data) {
                        /!*重新加载本页面*!/
                        window.location.reload();
                        alert(data);
                    },

                    error: function (jqXRH) {
                        console.log(jqXRH);
                        alert("设置未同步")
                    }
                })
            }
        }
    })

    //-----------------------------------------转班的按钮---------------------------------------------
    // let $class_transfer_button=$('#class_transfer_button');
       $('.class_transfer_button_1').click(function () {
        let stuId=$('#classChooseStuId').val();
        let classId=$('#class_end_id').val();
        if(!classId) {
            let result = {
                stuId: stuId,
                classId: classId
            }
            $.ajax({
                url:'/owep/user/stuList/treeCheck_edit',
                method:'get',
                dataType: "text",
                data: JSON.stringify(result),
                async: false,
                contentType: "application/json",
                success: function (data) {
                    /!*重新加载本页面*!/
                    window.location.reload();
                    alert(data);
                },
                error: function (jqXRH) {
                    console.log(jqXRH);
                    alert("设置未同步")
                }
            })
        }
    })
</script>
<!--分配按钮切换-->
<script>
    $(function () {
        $('.allocation').click(function () {
            $('.class_transfer').attr("class", "btn btn-default class_transfer");
            $('#class_transfer').css("display", "none");
            $('.allocation').attr("class", "btn btn-primary allocation");
            $('#allocation').css("display", "");
        });
        $('.class_transfer').click(function () {
            $('.allocation').attr("class", "btn btn-default allocation");
            $('#allocation').css("display", "none");
            $('.class_transfer').attr("class", "btn btn-primary class_transfer");
            $('#class_transfer').css("display", "");
        });
    });
</script>
</html>