<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--/*******************
 *Author:ZhongLei
 *version:V1.0
 *@Create: 2020/7/6 14:07
 *@Description:考评模板映射文件
 ***/-->

<mapper namespace="com.kclm.owep.mapper.PollTemplateMapper">
  <!-- resultMap映射 -->
  <resultMap id="BaseResultMap" type="com.kclm.owep.entity.PollTemplate">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="template_content" jdbcType="VARCHAR" property="templateContent" />
    <result column="template_name" jdbcType="VARCHAR" property="templateName" />
    <result column="template_num" jdbcType="VARCHAR" property="templateNum" />
    <result column="template_status" jdbcType="INTEGER" property="templateStatus" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="version" jdbcType="INTEGER" property="version" />
    <result column="last_access_time" jdbcType="TIMESTAMP" property="lastAccessTime" />
  </resultMap>

  <!--  通过id删除考评模板  -->
  <delete id="deleteById" parameterType="java.lang.Integer">
    delete from t_poll_template where id = #{value}
  </delete>

  <!--  通过id删除多个考评模板  -->
  <delete id="deleteSelect" parameterType="list">
    delete from t_poll_template where id in
    <foreach collection="list" open="(" close=")" separator="," item="id">
      #{id}
    </foreach>
  </delete>

  <!--  添加考评模板  -->
  <insert id="save" parameterType="com.kclm.owep.entity.PollTemplate" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
    insert into t_poll_template (id, template_content, template_name, 
      template_num, template_status)
    values (null,#{templateContent,jdbcType=VARCHAR}, #{templateName,jdbcType=VARCHAR},
      #{templateNum,jdbcType=VARCHAR}, #{templateStatus,jdbcType=INTEGER})
  </insert>

  <!--&lt;!&ndash;  添加考评模板  &ndash;&gt;
  <insert id="save" parameterType="com.kclm.owep.entity.PollTemplate">
    insert into t_poll_template (id, template_content, template_name,
    template_num, template_status, create_time,
    version, last_access_time)
    values (#{id,jdbcType=INTEGER}, #{templateContent,jdbcType=VARCHAR}, #{templateName,jdbcType=VARCHAR},
    #{templateNum,jdbcType=VARCHAR}, #{templateStatus,jdbcType=INTEGER}, #{createTime,jdbcType=TIMESTAMP},
    #{version,jdbcType=INTEGER}, #{lastAccessTime,jdbcType=TIMESTAMP})
  </insert>-->

  <!--&lt;!&ndash;  添加考评模板  &ndash;&gt;
  <insert id="insertSelective" parameterType="com.kclm.owep.entity.PollTemplate">
    insert into t_poll_template
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="templateContent != null">
        template_content,
      </if>
      <if test="templateName != null">
        template_name,
      </if>
      <if test="templateNum != null">
        template_num,
      </if>
      <if test="templateStatus != null">
        template_status,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="version != null">
        version,
      </if>
      <if test="lastAccessTime != null">
        last_access_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="templateContent != null">
        #{templateContent,jdbcType=VARCHAR},
      </if>
      <if test="templateName != null">
        #{templateName,jdbcType=VARCHAR},
      </if>
      <if test="templateNum != null">
        #{templateNum,jdbcType=VARCHAR},
      </if>
      <if test="templateStatus != null">
        #{templateStatus,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="version != null">
        #{version,jdbcType=INTEGER},
      </if>
      <if test="lastAccessTime != null">
        #{lastAccessTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>-->

  <!-- 统计考评模板数量 -->
  <select id="countPollTemplate" parameterType="com.kclm.owep.entity.PollTemplate" resultType="integer">
    select count(*) from t_poll_template
  </select>

  <!--  修改考评模板  -->
  <update id="update" parameterType="com.kclm.owep.entity.PollTemplate">
    update t_poll_template
    <set>
      <if test="templateContent != null">
        template_content = #{templateContent,jdbcType=VARCHAR},
      </if>
      <if test="templateName != null">
        template_name = #{templateName,jdbcType=VARCHAR},
      </if>
      <if test="templateNum != null">
        template_num = #{templateNum,jdbcType=VARCHAR},
      </if>
      <if test="templateStatus != null">
        template_status = #{templateStatus,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="version != null">
        version = #{version,jdbcType=INTEGER},
      </if>
      <if test="lastAccessTime != null">
        last_access_time = #{lastAccessTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>


  <!--  通过关键字查找  -->
  <select id="findByKeywords" resultType="PollTemplate" parameterType="string">
    select * from t_poll_template
    where template_name like concat('%',#{keyword},'%')
  </select>

  <!--  通过id查找  -->
  <select id="selectById" parameterType="integer" resultType="PollTemplate">
    select * from t_poll_template
    where id = #{value}
  </select>

  <select id="selectAll" resultType="PollTemplate">
    select * from t_poll_template
  </select>

</mapper>